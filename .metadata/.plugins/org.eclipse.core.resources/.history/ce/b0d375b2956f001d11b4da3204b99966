<!DOCTYPE html>
<!-- saved from url=(0109)file:///C:/js_workspace/day1018/%EB%B2%A0%EB%84%A4%EC%B9%98%EC%95%84%ED%83%80%EC%9E%90%EA%B2%8C%EC%9E%84.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>베네치아타자게임</title>
    <style>
        #wrapper{
            width: 1150px; height: 700px;   
            background: yellow;  
            margin: auto;       
            overflow: hidden;
        }

        #control{
            width: 150px; height: 100%;
            background: pink;
            float: left;
            text-align: center;
        }
        #control select {
            width: 97%; height: 30px;
            background: palevioletred;
            color: white;
            font-weight: bold;
            text-align: center;
        }
        #control input{
            width: 93%; height: 50px;
            margin-top: 10px;
            font-size: 20px;
            text-align: center;
        }
        #hp-area{
            width: 100%; height: 160px;
            background: gray;
            margin-top: 10px;
            position: relative; /*(1-2) 자식의 position이 명시됐기 때문*/
        }
        #item-area{
            width: 100%; height: 100px;
            background: beige;
            margin-top: 10px;
        }
        #score-area{
        width: 100%; height: 100px;
        background: gray; 
        color:white;
        font-size: 50px;
        text-align: center;
        margin-top: 10px;   
        margin-bottom: 10px;
        padding-top: 15px;
        box-sizing: border-box;
        }

        #content{
            width: 1000px; height: 100%;
            background: palegreen;
            float: left;
            position: relative; /*span 때문에*/
        }
        
    </style>
    <script src="./베네치아타자게임_files/util.js.다운로드">//(8)content안의 텍스트 랜던값가져오기 위한 함수</script>
    <script>
        /*(4)단어를 배열로 선언해야하는 이유?
        사용자가 입력한 값과 단어들을 비교해야하며, 이때 이 비교는 반복문으로 처리해야한다
        따라서 반복문의 대상이 되려면
        단어들은 순서가 있어야 하므로 배열로 선언해야한다*/
        let wordArray=["가방","필통","텀블러","안경","핸드크림","키보드","마우스","젤리","초콜릿","우유"];
        
        //(5-1) span들을 담게 될 배열
        let spanArray=[wordArray.length];
        let stepY=5; //(5-4)몇 픽셀씩 내려올지 결정짓는 변수
        let flag=false; //(5-5)
        

        //(4-1) 단어들을 담게될 span들을 생성하자
        function creatWord(){
            for(let i=0; i<wordArray.length;i++){
                let span=document.createElement("span"); //<span></span>
                span.innerText=wordArray[i]; //단어넣기
                span.style.position="absolute";
                span.style.left=30+(i*90)+"px";
                span.style.top=getRandomWithRange(-60,-30)+"px"; //(8-1) 랜덤값적용
                span.style.background="gray";
                span.style.color="white";

                let content=document.getElementById("content");
                content.appendChild(span);

                //(5-2)배열에 넣자!
                spanArray[i]=span;
            }
        }
        //(5) 전체 단어 내려오기
        function moveDown(){
            if(flag){ //(5-5) 조건주기
                for(let i=0;i<spanArray.length;i++){
                    //(5-3)
                    spanArray[i].style.top=parseInt(spanArray[i].style.top)+stepY+"px";
                }
            }
        }
        
        //(1)hp생성하기
        function createHp(){
            //(2) 포문이용해서 4층에 3호수 만들기
        for(let a=0;a<4;a++){//층수와 관련
                    for(let i=0;i<3;i++){ //호수와 관련
                        let hp=document.createElement("div");
                        hp.style.width=48+"px";
                        hp.style.height=40+"px";
                        hp.style.background="gray";
                        hp.style.border="1px solid white"
                        hp.style.position="absolute";
                        hp.style.left=(i*50)+"px"; //호수와 연관
                        hp.style.top=(a*40)+"px";                        
                                             

                        //(1-1)hp-area div에 부착
                        let hpArea=document.getElementById("hp-area");
                        hpArea.appendChild(hp);
                    }
                }
        }

        //(3-2) 게임의 배경 바꾸기
        function setBg(file){
            let content=document.getElementById("content");
            content.style.background="url(../images/bene/"+file+")";

            //(3-4) background 크기를 div에 맞춰서 조절
            content.style.backgroundSize="1000px 100%";
        }

        //(6) 게임가동 (flag=true로 놓자)
        function gameStart(){
            flag=true;

            //(9)게임 진행을 위해, 텍스트 입력박스에 커서 올려놓기!
            let t_input=document.getElementById("t_input");
            t_input.focus();
        }

        //(7) 게임중지 (flag=false)
        function pause(){
            flag=false;
        }
        
        /*(10-1) 엔터를 치면 입력한 데이터와 현재 게임에 존재하는 모든 단어들과
            일치하는지 여부판단
            일치하면 내려오는 단어를 화면에서 제거(그래픽처리) 및
            데이터제거(배열요소에서 없애자)*/
        function enterKey(){
            let t_input=document.getElementById("t_input");
            
            //(10-2) t_input.value:테스트박스에 입력한 값을 가져옴
            //(10-3) span사이에 있는 글씨와 비교
            if(t_input.value==spanArray[0].innerText){ 
                alert("맞아");
            }
             
        }

        function init(){
            createHp();
            creatWord();
            setInterval("moveDown()",500);
        }


        window.addEventListener("load",function(){
            init();

            //(3) select 박스에 이벤트 연결하기
            document.querySelector("select").addEventListener("change", function(){
                /*(3-1) 이 영역은 select요쇼에 의해 발생한 이벤트 영역이므로
                    이벤트 발생 주체인 select 상자를 this로 표현가능*/
                console.log("당신이 선택한 배경은",this.value);

                setBg(this.value);//(3-3) 매개변수로 파일명을 전달해주자
            });

            //(10) t_input에 이벤트 연결하기
            document.getElementById("t_input").addEventListener("keyup",function(e){
                //console.log(e); //keyCode 접근하기
                if(e.keyCode==13){ //엔터를 쳤다면
                    enterKey(); //이벤트명이 바뀔 수도 있으니 함수로 정의해서 불러오자
                }
            });
        });
    </script>
</head>
<body>
    <div id="wrapper">
        <div id="control">
            <select>
                <option value="">배경선택</option>
                <option value="bg1.jpg">배경1</option>
                <option value="bg2.jfif">배경2</option>
                <option value="bg3.jpg">배경3</option>
            </select>

            <input type="text" placeholder="단어입력" id="t_input">

            <div id="hp-area"><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 0px; top: 0px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 50px; top: 0px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 100px; top: 0px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 0px; top: 40px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 50px; top: 40px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 100px; top: 40px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 0px; top: 80px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 50px; top: 80px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 100px; top: 80px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 0px; top: 120px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 50px; top: 120px;"></div><div style="width: 48px; height: 40px; background: gray; border: 1px solid white; position: absolute; left: 100px; top: 120px;"></div></div>
            <div id="item-area"></div>
            <div id="score-area">200점</div>
            <button onclick="gameStart()">Start</button>
            <button onclick="pause()">Pause</button>
        </div>
        <div id="content"><span style="position: absolute; left: 30px; top: 448px; background: gray; color: white;">가방</span><span style="position: absolute; left: 120px; top: 449px; background: gray; color: white;">필통</span><span style="position: absolute; left: 210px; top: 427px; background: gray; color: white;">텀블러</span><span style="position: absolute; left: 300px; top: 439px; background: gray; color: white;">안경</span><span style="position: absolute; left: 390px; top: 429px; background: gray; color: white;">핸드크림</span><span style="position: absolute; left: 480px; top: 420px; background: gray; color: white;">키보드</span><span style="position: absolute; left: 570px; top: 422px; background: gray; color: white;">마우스</span><span style="position: absolute; left: 660px; top: 444px; background: gray; color: white;">젤리</span><span style="position: absolute; left: 750px; top: 433px; background: gray; color: white;">초콜릿</span><span style="position: absolute; left: 840px; top: 420px; background: gray; color: white;">우유</span></div>
    </div>

</body></html>